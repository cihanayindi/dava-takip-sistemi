{% extends "base.html" %}

{% block title %} Bildirimler {% endblock %}

{% block content %}
<div class="container mt-4">
    <h1 class="text-center mb-4">Bildirimler</h1>
    <form id="markAsReadForm" action="{% url 'mark_notifications_as_read' %}" method="post">
        {% csrf_token %}
        <button type="submit" class="btn btn-success mb-3">Seçili Bildirimleri Okundu Olarak İşaretle</button>
        <table class="table table-striped table-bordered shadow">
            <thead class="table-light">
                <tr>
                    <th>Seç</th>
                    <th>Metin</th>
                    <th>Link</th>
                    <th>Okundu</th>
                    <th>Sil</th>
                </tr>
            </thead>
            <tbody>
                {% for notification in notifications %}
                    <tr style="background-color: {% if notification.priority == 3 %} #ffcccc; {% elif notification.priority == 2 %} #ffe6cc; {% elif notification.priority == 1 %} #ccffcc; {% endif %}">
                        <td>
                            <input type="checkbox" name="notification_ids" value="{{ notification.id }}">
                        </td>
                        <td>{{ notification.text }}</td>
                        <td>
                            <a href="{{ notification.link }}" class="btn btn-primary">Git</a>
                        </td>
                        <td>
                            {% if notification.read %}
                                <span class="text-success">Okundu</span>
                            {% else %}
                                <span class="text-danger">Okunmadı</span>
                            {% endif %}
                        </td>
                        <td>
                            <form action="{% url 'notification_delete' notification.id %}" method="post" style="display: inline;">
                                {% csrf_token %}
                                <input type="hidden" name="notification_id" value="{{ notification.id }}">
                                <button type="submit" class="btn btn-danger">Sil</button>
                            </form>
                        </td>
                    </tr>
                {% empty %}
                    <tr>
                        <td colspan="5" class="text-center">Henüz bildirim yok</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>
</div>
{% endblock %}
