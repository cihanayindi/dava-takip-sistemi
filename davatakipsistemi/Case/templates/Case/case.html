{% extends "base.html" %}

{% block title %}
Dava Detayı
{% endblock title %}

{% block content %}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">

<style>
    .card-header, .table thead th {
        background-color: #007bff;
        color: white;
    }
    .card {
        border: 1px solid #007bff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    }
    .card-body ul.list-group li {
        padding: 0.8rem 1.25rem;
        border: none;
        font-size: 1rem;
    }
    .card-body ul.list-group li:not(:last-child) {
        border-bottom: 1px solid #dee2e6;
    }
    .card-footer {
        background-color: #f8f9fa;
    }
    .btn-primary {
        background-color: #0056b3;
        border-color: #0056b3;
    }
    .container h1 {
        font-weight: bold;
        color: #333;
        font-size: 1.75rem;
    }
</style>

<div class="container mt-5">
    <h1 class="text-center mb-4">Dava Numarası: {{ case.case_number }}</h1>
    
    <div class="card shadow-lg">
        <div class="card-header text-center">
            <h4>Dava Bilgileri</h4>
        </div>
        <div class="card-body">
            <ul class="list-group">
                <li class="list-group-item"><strong>Müvekkil:</strong> {{ case.client.name }} {{ case.client.surname }}</li>
                <li class="list-group-item"><strong>Dava Türü:</strong> {{ case.case_type }}</li>
                <li class="list-group-item"><strong>Durum:</strong> {{ case.status }}</li>
                <li class="list-group-item"><strong>Mahkeme:</strong> {{ case.court }}</li>
                <li class="list-group-item"><strong>Açıklama:</strong> {{ case.description }}</li>
                <li class="list-group-item"><strong>Oluşturulma Tarihi:</strong> {{ case.created_at }}</li>
                <li class="list-group-item"><strong>Güncellenme Tarihi:</strong> {{ case.updated_at }}</li>
            </ul>
        </div>
        <div class="card-footer text-center">
            {% if case.client %}
                <a href="{% url 'show_client_detail' case.client.id %}" class="btn btn-primary">İlgili Müvekkilin Sayfasına Git</a>
            {% else %}
                <p class="text-center">
                    <a style="display: inline-block; padding: 10px 15px; background-color: #f8d7da; color: #721c24; font-weight: bold; text-decoration: none; border-radius: 5px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);">
                        <i class="fas fa-exclamation-circle" style="margin-right: 8px;"></i> Henüz ilgili bir müvekkil tanımlanmamış, müvekkil eklemek için aşağıdan müvekkil seçin.
                    </a>
                </p>
                <form method="POST">
                    {% csrf_token %}
                    <div class="form-group">
                        <label for="client_select">Müvekkil Seçin:</label>
                        <select name="client_id" id="client_select" class="form-control">
                            {% for client in clients %}
                                <option value="{{ client.id }}">{{ client.name }} {{ client.surname }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary mt-2">Müvekkili Ekle</button>
                </form>
                {% comment %} BURADA BİR DROP DOWN MENÜ OLACAK BU MENÜ SİSTEMDEKİ TÜM MÜVEKKİLLERİ GÖSTERECEK
                              DROP DOWN MENÜNÜN ALTINDA BİR BUTON OLACAK VE BUTONA BASILDIĞINDA DROP DOWN MENÜDE SEÇİLİ OLAN MÜVEKKİLİN İD'Sİ
                              SİSTEMDE BU DAVANIN client_id SÜTUNUNA EKLENECEK {% endcomment %}
            {% endif %}
        </div>
    </div>
</div>
{% endblock content %}
